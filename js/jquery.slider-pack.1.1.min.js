/*
 * Two Dimensional Slider for Touchfolio theme.
 *
 * Copyright 2012 Dmitry Semenov. http://dimsemenov.com
 *
 * You must not use this slider outside the Touchfolio theme. Slider is based on commercial RoyalSlider script.
 *
*/
!function(e){function t(t,r){var a,o=navigator.userAgent.toLowerCase(),n=this,s=jQuery.browser,l=s.mozilla,d=s.webkit,u=(o.match(/(iphone|ipod|ipad)/),o.indexOf("android")>-1,o.indexOf("chrome")>-1),c=-1!=navigator.appVersion.indexOf("Mac"),m=document.createElement("div").style,_=["webkit","Moz","ms","O"],b="";for(i=0;i<_.length;i++)a=_[i],!b&&a+"Transform"in m&&(b=a),a=a.toLowerCase();if(n._isChrome=u,n._wpVars=tdSliderVars,n.sliderRoot=e(t),n._slidesWrapper=n.sliderRoot.find(".slider-wrapper"),n._loopItems=!1,n._loopAlbums=!1,n.onTransitionStart=function(){},n.onTransitionComplete=function(){},n._startTime,n._moveDist,n._accelerationX,n._accelerationY,n._currAnimSpeed,n._isVerticalNav=!1,n._currMoveAxis="none",n._collapsedSlider=!1,n._isAnimating=!1,n._isDragging=!1,n._multipleTouches=!1,n.moved,n.startX,n.startY,n.pointX,n.pointY,n.changedX,n.changedY,n.firstLoaded=!1,n.directionLocked,n.x=0,n.y=0,n.loadingTimeout,n.settings=e.extend({},e.fn.twoDimSlider.defaults,r),n._useCSS3Transitions=n._use3dTransform=u?!1:Modernizr.csstransforms3d,n._orientationChangeEvent="onorientationchange"in window?"orientationchange.tds resize.tds":"resize.tds",window.navigator.msPointerEnabled)("ontouchstart"in window||"createTouch"in document)&&(n.hasTouch=!1),n._downEvent="MSPointerDown.tds",n._moveEvent="MSPointerMove.tds",n._upEvent="MSPointerUp.tds ",n._cancelEvent=n._upEvent,n._clickEvent=n._downEvent;else if("ontouchstart"in window||"createTouch"in document)n.hasTouch=!0,n._downEvent="touchstart.tds",n._moveEvent="touchmove.tds",n._upEvent="touchend.tds ",n._cancelEvent="touchcancel.tds",n._clickEvent="touchstart";else{n.hasTouch=!1,n._grabCursor,n._grabbingCursor;var o=e.browser;o.msie||o.opera?n._grabCursor=n._grabbingCursor="move":o.mozilla?(n._grabCursor="-moz-grab",n._grabbingCursor="-moz-grabbing"):c&&d&&(n._grabCursor="-webkit-grab",n._grabbingCursor="-webkit-grabbing"),this._setGrabCursor(),n._downEvent="mousedown.tds",n._moveEvent="mousemove.tds",n._upEvent="mouseup.tds",n._cancelEvent="mouseup.tds",n._clickEvent="click"}n.hasTouch?(n._arrowControlsEnabled=!0,n._fastClick="touchstart"):(n._arrowControlsEnabled=!0,n._fastClick="click");var f='<div class="slider-wrapper"><div class="drag-container">',p=["center","top","right","bottom","left"];e.each(p,function(){f+='<div class="block '+this+'"><div class="block-inside"></div></div>'}),f+="</div></div>",f+='<div class="video-overlay"><div class=" video-close-button"><a href="javascript:void();" class="hidden-video underlined">'+n._wpVars.closeVideo+'</a></div><div class="video-container"></div></div>',n._arrowControlsEnabled,f+='<div class="slider-controls">',n._arrowControlsEnabled&&(f+='<div class="arrow-left disabled-arrow"><a  href="javascript:void(0);" class="icon-bg"><span class="icon"></span><span class="info-text">'+n._wpVars.prevAlbum+'</span></a></div><div class="arrow-right"><a href="javascript:void(0);" class="icon-bg"><span class="icon"></span><span class="info-text">'+n._wpVars.nextAlbum+"</span></a></div>");var h=n._getQueryParameters().listurl;h&&(f+='<div class="back-to-list-button"><a class="close-gallery-button underlined" href="'+h+'">'+n._wpVars.backToList+"</a></div>"),f+='<div class="slider-album-indicator">',f+='<div class="album-info-text"><a href="javascript:void(0);" title="Info" class="album-name-indicator underlined"></a><span class="item-count-indicator"></span></div>',f+="</div>",f+="</div>",n._galleryPostsNavigation=n.sliderRoot.find(".gallery-posts-navigation"),n._lastItemLink=!1,n._galleryPostsNavigation.length>0&&(n._lastItemLink=!0),n.sliderRoot.append(f),n._slidesWrapper=n.sliderRoot.find(".slider-wrapper"),n.videoOverlay=n.sliderRoot.find(".video-overlay"),n.videoContainer=n.videoOverlay.find(".video-container"),n.currVideoImg="",n.isVideoPlaying=!1,n._videoCloseButton=n.videoOverlay.find(".video-close-button"),n._videoCloseButton.bind("click",function(){n.stopAndCloseVideo()}),n._nextPrevActionsLocked=!1;var g=n._slidesWrapper;n._dragContainer=g.find(".drag-container"),n._topBlock=g.find(".top"),n._leftBlock=g.find(".left"),n._centerBlock=g.find(".center"),n._rightBlock=g.find(".right"),n._bottomBlock=g.find(".bottom"),n._albumInfoAnimating=!1,n.loadQueue,n.imageLoader,n._lastAlbumId,n._lastAlbumNumItems,n._lastItemId,n._changeHash=!1,n._imagePaddingEMs=0,n._controlsVisible=!0,n._currentMainBlockId=0,n._currentMainAlbumBlockId=0,n._tempMainBlockId=0,n._tempMainAlbumBlockId=0,n.settings.disableContextMenu&&n.sliderRoot.bind("contextmenu",function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),n.hasTouch?(n._lastItemFriction=.5,n.settings.autoOpenDescription=!1):n._lastItemFriction=.2,n._useCSS3Transitions?l&&"moz"===b?(n.browserSufix="-moz-",n._yProp=n._xProp="-moz-transform",n.transitionEndEvent="transitionend.tds",n._use3dTransform?(n._tPref1="translate3d(",n._tPref2="px, ",n._tPref3="px, 0px)"):(n._tPref1="translate(",n._tPref2="px, ",n._tPref3="px)")):d&&n._use3dTransform?(n.browserSufix="-webkit-",n._yProp=n._xProp="-webkit-transform",n.transitionEndEvent="webkitTransitionEnd.tds",n._use3dTransform?(u||n._dragContainer.children().css({"-webkit-transform":"translateZ(0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"}),n._dragContainer.css({"-webkit-transform":"translateZ(0px)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"}),n._tPref1="translate3d(",n._tPref2="px, ",n._tPref3="px, 0px)"):(n._tPref1="translate(",n._tPref2="px, ",n._tPref3="px)")):(n.browserSufix=/trident/i.test(navigator.userAgent)?"-ms-":"opera"in window?"-o-":"",n._yProp=n._xProp=n.browserSufix+"transform",n.transitionEndEvent=n.browserSufix+"transitionend.tds",n._tPref1="translate(",n._tPref2="px, ",n._tPref3="px)"):(n._xProp="left",n._yProp="top",n._tPref1="",n._tPref2="",n._tPref3="",n._tPref4=""),n._sliderControls=n.sliderRoot.find(".slider-controls"),n._albumInfoOpen=!1,n._albumInfoAnimRunning=!1,n._headerSideMenu=e(".main-header"),n._menusContainer=n._headerSideMenu.find(".menus-container"),n._menusContainer=n._headerSideMenu.find(".menus-container"),n.albumsArr=[],n.currAlbum,n._albumIndicator=n._sliderControls.find(".slider-album-indicator"),n._albumInfoText=n._albumIndicator.find(".album-info-text"),n._albumNameIndicator=n._albumIndicator.find(".album-name-indicator"),n._itemCountIndicator=n._albumIndicator.find(".item-count-indicator"),n._albumInfoBlock=e('<div class="album-info-block text-block"><div class="album-info-text"></div></div>').appendTo("body");if(n._albumIndicator.bind("click",function(){n._toggleAlbumInfo()}),n.settings.appendGalleriesToMenu){var I,v,A=n.sliderRoot.find(".two-dim-album"),k='<ul id="gallery-menu" class="menu">';A.each(function(t,i){I=e(i).data("start-item",0),v=I.attr("data-album-id"),k+='<li data-id="'+v+'" class="menu-item"><a href="#'+v+'">'+I.find(".album-title").text()+"</a></li>",n.albumsArr.push(I)}),k+="</ul>"}else n.sliderRoot.find(".two-dim-album").each(function(t,i){n.albumsArr.push(e(i).data("start-item",0))});if(!n.albumsArr.length>0)return void alert("Gallery error :(. No albums and images found");var B=0,x=window.location.hash;x&&(x=x.replace(/^#/,""),B=n.getAlbumIdByIdAtt(x)),n.currAlbum=n.albumsArr[B],n.currAlbumId=B,n.numAlbums=n.albumsArr.length,n._arrowControlsEnabled&&(n._prevImageArr=n.sliderRoot.find(".arrow-left").click(function(e){e.preventDefault(),n.prev()}),n._nextImageArr=n.sliderRoot.find(".arrow-right").click(function(e){e.preventDefault(),n.next()})),n._primaryMenu=n._headerSideMenu.find(".primary-menu > .current-menu-item"),n.settings.appendGalleriesToMenu&&n.numAlbums>1&&(0!=n._primaryMenu.index()&&n._primaryMenu.before('<span class="menu-sep project-menu-sep">&mdash;</span>'),k+='<span class="menu-sep project-menu-sep">&mdash;</span>',n._primaryMenu.append(k),n._galleryMenuItems=n._primaryMenu.find("#gallery-menu").find("li"),n._galleryMenuItems.click(function(t){t.preventDefault(),t.stopImmediatePropagation();var i=n.getAlbumIdByIdAtt(e(this).attr("data-id"));n._moveTo(i,"y",500,!0,!0)})),n.currAlbumItems=n.currAlbum.find(".two-dim-item"),n.currItemId=0,n.currAlbumNumItems=n.currAlbumItems.length,n.currAlbumScaleMode=n.currAlbum.data("img-scale");var C;e(window).bind(n._orientationChangeEvent,function(){C&&clearTimeout(C),C=setTimeout(function(){n.updateSliderSize()},35)}),n.updateSliderSize(),n.updateContents(),n._slidesWrapper.bind(n._downEvent,function(e){n._onDragStart(e)}),n.settings.keyboardNavEnabled&&e(document).keydown(function(e){n._isDragging||n._isAnimating||(37===e.keyCode?(e.preventDefault(),n.prev()):39===e.keyCode?(e.preventDefault(),n.next()):40===e.keyCode?(e.preventDefault(),n.nextAlbum()):38===e.keyCode?(e.preventDefault(),n.prevAlbum()):73===e.keyCode&&n._toggleAlbumInfo())}),e("body").bind("mouseleave",function(e){n._isDragging&&n._onDragRelease(e)}),n.hasTouch||n.sliderRoot.bind("mousewheel",function(e,t){0>t?n.next():t>0&&n.prev()}),n._changedByHash=!1,n._ignoreHashChange=!1,n._hashTimeout,n._unblockHashChange(),n.hasTouch&&(e.idleTimer(n.hasTouch?4e3:2e3,document,{events:"mousemove touchend mouseup"}),e(document).bind("idle.idleTimer",function(){n._albumInfoOpen||n._hideAllControls()})),n.settings.autoOpenDescription&&n.sliderWidth>900&&(n._showAlbumInfo(),n._fadeOut(n._albumIndicator),n.albumsArr[n.currAlbumId].data("sawInfo",!0))}t.prototype={getAlbumIdByIdAtt:function(e){for(var t=this,i=t.albumsArr,r=0;r<i.length;r++)if(i[r].attr("data-album-id")===e)return r;return 0},_blockHashChange:function(){e(window).unbind("hashchange.tds")},_updateAlbumHash:function(){var e=this;e._updateHash(e.albumsArr[e.currAlbumId].attr("data-album-id"))},_unblockHashChange:function(){var t=this;e(window).bind("hashchange.tds",function(){var e=location.hash;e=e.replace(/^#/,"");var i=t.getAlbumIdByIdAtt(e);t._moveTo(i,"y",500)})},_updateHash:function(e){var t=this;t._blockHashChange(),window.location.hash=e,t._hashTimeout&&clearTimeout(t._hashTimeout),t._hashTimeout=setTimeout(function(){t._unblockHashChange()},60)},_doBackAndForthAnim:function(e){function t(){n._isAnimating=!1}function i(){n._isAnimating=!1,n._animateTo(r,"",a,!1,!0,t)}var r,a,o,n=this,s=Math.max(n._xDistToSnap,130)/3;if(n._currAnimSpeed=200,"bottom"===e?(r=n._tempMainAlbumBlockId*n.sliderHeight,a="y",o=-s):"top"===e?(r=n._tempMainAlbumBlockId*n.sliderHeight,a="y",o=s):"right"===e?(r=n._tempMainBlockId*n.sliderWidth,a="x",o=-s):"left"===e&&(r=n._tempMainBlockId*n.sliderWidth,a="x",o=s),n._lastItemLink){var l;if(l="left"===e||"top"===e?n._galleryPostsNavigation.find("a[rel=next]").attr("href"):n._galleryPostsNavigation.find("a[rel=prev]").attr("href"))return void(window.location.href=l)}n._animateTo(r+o,"",a,!1,!0,i)},_moveTo:function(e,t,i,r,a,o){var n,s,l,d=this;if(d._isDragging||d._isAnimating)return!1;if(d.isVideoPlaying&&d.stopAndCloseVideo(),d._changeHash="y"===t&&r?!0:!1,"x"===t)if("next"===e){if(!d._loopItems&&d.currItemId+1>=d.currAlbumNumItems)return d._doBackAndForthAnim("right"),!1;d._hideAlbumInfo(),d._tempMainBlockId=d._currentMainBlockId-1,d._updateCurrItemId(d.currAlbumId,d.currItemId+1),n=d._rightBlock,d._rightBlock=d._leftBlock,d._leftBlock=d._centerBlock,d._centerBlock=n,s=d._tempMainBlockId*d.sliderWidth,d._currAnimSpeed=i,d._animateTo(s,"next","x",!1,a)}else if("prev"===e){if(!d._loopItems&&d.currItemId-1<0)return d._doBackAndForthAnim("left"),!1;d._hideAlbumInfo(),d._tempMainBlockId=d._currentMainBlockId+1,d._updateCurrItemId(d.currAlbumId,d.currItemId-1),n=d._centerBlock,d._centerBlock=d._leftBlock,d._leftBlock=d._rightBlock,d._rightBlock=n,s=d._tempMainBlockId*d.sliderWidth,d._currAnimSpeed=i,d._animateTo(s,"prev","x",!1,a)}else{var u=parseInt(e,10);u===d.currItemId+1?d._moveTo("next","x",i):u===d.currAlbumId-1?d._moveTo("prev","x",i):u>d.currItemId?(d._tempMainBlockId=d._currentMainBlockId-1,d._updateCurrItemId(d.currAlbumId,currItemId),n=d._rightBlock,d._rightBlock=d._leftBlock,d._leftBlock=d._centerBlock,d._centerBlock=n,s=d._tempMainBlockId*d.sliderWidth,d._currAnimSpeed=i,d._centerBlock.find("img").css("visibility","hidden"),d._animateTo(s,"next","x",!0,a)):u<d.currItemId&&(d._tempMainAlbumBlockId=d._currentMainAlbumBlockId+1,d._updateCurrItemId(d.currAlbumId,currItemId),n=d._centerBlock,d._centerBlock=d._leftBlock,d._leftBlock=d._rightBlock,d._rightBlock=n,s=d._tempMainAlbumBlockId*d.sliderHeight,d._currAnimSpeed=i,d._centerBlock.find("img").css("visibility","hidden"),d._animateTo(s,"prev","x",!0,a))}else if("next"===e){if(!d._loopAlbums&&d.currAlbumId+1>=d.numAlbums)return d._doBackAndForthAnim(o?"right":"bottom"),!1;d._hideAlbumInfo(),d._tempMainAlbumBlockId=d._currentMainAlbumBlockId-1,d._updateCurrItemId(d.currAlbumId+1,0),l=d._getAlbum(d.currAlbumId),d.currItemId=l.data("start-item"),n=d._bottomBlock,d._bottomBlock=d._topBlock,d._topBlock=d._centerBlock,d._centerBlock=n,s=d._tempMainAlbumBlockId*d.sliderHeight,d._currAnimSpeed=i,d._animateTo(s,"next","y",!1,a)}else if("prev"===e){if(!d._loopAlbums&&d.currAlbumId-1<0)return d._doBackAndForthAnim(o?"left":"top"),!1;d._hideAlbumInfo(),d._tempMainAlbumBlockId=d._currentMainAlbumBlockId+1,d._updateCurrItemId(d.currAlbumId-1,0),l=d._getAlbum(d.currAlbumId),d.currItemId=l.data("start-item"),n=d._centerBlock,d._centerBlock=d._topBlock,d._topBlock=d._bottomBlock,d._bottomBlock=n,s=d._tempMainAlbumBlockId*d.sliderHeight,d._currAnimSpeed=i,d._animateTo(s,"prev","y",!1,a)}else{var c=parseInt(e,10);c===d.currAlbumId+1?d._moveTo("next","y",i,r,a):c===d.currAlbumId-1?d._moveTo("prev","y",i,r,a):c>d.currAlbumId?(d._tempMainAlbumBlockId=d._currentMainAlbumBlockId-1,d._updateCurrItemId(c,0),l=d._getAlbum(d.currAlbumId),d.currItemId=l.data("start-item"),n=d._bottomBlock,d._bottomBlock=d._topBlock,d._topBlock=d._centerBlock,d._centerBlock=n,s=d._tempMainAlbumBlockId*d.sliderHeight,d._currAnimSpeed=i,d._updateAlbumBackground(d._centerBlock,l.data("bg"),d.currAlbumId),d._centerBlock.find(".play-button-container").remove(),d._centerBlock.find("img").css("visibility","hidden"),d._animateTo(s,"next","y",!0,a)):c<d.currAlbumId&&(d._tempMainAlbumBlockId=d._currentMainAlbumBlockId+1,d._updateCurrItemId(c,0),l=d._getAlbum(d.currAlbumId),d.currItemId=l.data("start-item"),n=d._centerBlock,d._centerBlock=d._topBlock,d._topBlock=d._bottomBlock,d._bottomBlock=n,s=d._tempMainAlbumBlockId*d.sliderHeight,d._currAnimSpeed=i,d._updateAlbumBackground(d._centerBlock,l.data("bg"),d.currAlbumId),d._centerBlock.find(".play-button-container").remove(),d._centerBlock.find("img").css("visibility","hidden"),d._animateTo(s,"prev","y",!0,a))}d._updateControls(t)},next:function(){var e=this;e._nextPrevActionsLocked||(e._nextPrevActionsLocked=!0,e.currItemId+1>=e.currAlbumNumItems&&e.currAlbumId<e.numAlbums-1?e._moveTo("next","y",this.settings.transitionSpeed,!0,!0):e._moveTo("next","x",this.settings.transitionSpeed,!0,!0),e._nextPrevActionsLocked=!1)},prev:function(){var e=this;e._nextPrevActionsLocked||(e._nextPrevActionsLocked=!0,!e._loopItems&&e.currItemId-1<0&&0!=e.currAlbumId?e._moveTo("prev","y",this.settings.transitionSpeed,!0,!0):e._moveTo("prev","x",this.settings.transitionSpeed,!0,!0),e._nextPrevActionsLocked=!1)},nextItem:function(){this._moveTo("next","x",this.settings.transitionSpeed,!0,!0)},prevItem:function(){this._moveTo("prev","x",this.settings.transitionSpeed,!0,!0)},nextAlbum:function(){this._moveTo("next","y",this.settings.transitionSpeed,!0,!0)},prevAlbum:function(){this._moveTo("prev","y",this.settings.transitionSpeed,!0,!0)},_updateAlbumBackground:function(e,t,i){e.data("bg-album-id")!==i&&(e.data("bg-album-id",i),e.css("background",t))},_onDragStart:function(t){var i=this;if(i._isAnimating)return t.preventDefault(),!1;if(i._isDragging)return void(i.hasTouch&&(i._multipleTouches=!0));i.hasTouch&&(i._multipleTouches=!1),i._useCSS3Transitions&&i._dragContainer.css(i.browserSufix+"transition-duration","0s"),i._setGrabbingCursor(),i._isDragging=!0;var r;if(i.hasTouch){var a=t.originalEvent.touches;if(!(a&&a.length>0))return!1;r=a[0],a.length>1&&(i._multipleTouches=!0)}else r=t,t.preventDefault();e(document).bind(i._moveEvent,function(e){i._onDragMove(e)}),e(document).bind(i._upEvent,function(e){i._onDragRelease(e)}),i._isVerticalNav=!1,i._currMoveAxis="",i.moved=!1,i.pointX=i._accelerationX=i.startX=r.pageX,i.pointY=i._accelerationY=i.startY=r.pageY,i.changedX=0,i.changedY=0,i.horDirection=0,i.verDirection=0,i.directionLocked=!1,i._startTime=t.timeStamp||(new Date).getTime(),i._moveDist=0,i.hasTouch&&i._slidesWrapper.bind(i._cancelEvent,function(e){i._onDragRelease(e)})},_onDragMove:function(e){var t,i=this;if(i.hasTouch){var r=e.originalEvent.touches;if(!r)return!1;if(r.length>1)return!1;t=r[0],e.preventDefault()}else t=e,e.preventDefault();var a=e.timeStamp||(new Date).getTime(),o=t.pageX-i.pointX,n=t.pageY-i.pointY;if(i.changedX+=Math.abs(o),i.changedY+=Math.abs(n),!(i.changedY<10&&i.changedX<7)){var s=i.x+o,l=i.y+n;i.moved=!0,i.pointX=t.pageX,i.pointY=t.pageY;var d=i._currMoveAxis;return"x"===d?0!==o&&(i.horDirection=o>0?1:-1):"y"===d?0!==n&&(i.verDirection=n>0?1:-1):i.changedY>i.changedX?(i._isVerticalNav=!0,i._currMoveAxis="y",i.verDirection=n>0?1:-1):(i._currMoveAxis="x",i.horDirection=o>0?1:-1),i._isVerticalNav?(i._loopAlbums||(i.currAlbumId<=0&&t.pageY-this.startY>0&&(l=i.y+n*i._lastItemFriction),i.currAlbumId>=i.numAlbums-1&&t.pageY-this.startY<0&&(l=i.y+n*i._lastItemFriction)),i._setPosition(l,"y"),a-i._startTime>200&&(i._startTime=a,i._accelerationY=t.pageY)):(i._loopItems||(i.currItemId<=0&&t.pageX-this.startX>0&&(s=i.x+o*i._lastItemFriction),i.currItemId>=i.currAlbumNumItems-1&&t.pageX-this.startX<0&&(s=i.x+o*i._lastItemFriction)),i._setPosition(s,"x"),a-i._startTime>200&&(i._startTime=a,i._accelerationX=t.pageX)),!1}},_onDragRelease:function(t){function i(e){return 200>e?200:e>500?500:e}function r(e,t,r){d="x"===e?c._currentMainBlockId*c.sliderWidth:c._currentMainAlbumBlockId*c.sliderHeight,u=Math.abs(c[e]-d),c._currAnimSpeed=u/r,t&&(c._currAnimSpeed+=250),c._currAnimSpeed=i(c._currAnimSpeed),c._animateTo(d,!1,e)}var a,o,n,s,l,d,u,c=this,m=c.hasTouch?t.originalEvent.changedTouches[0]:t;if(c._isDragging=!1,e(document).unbind(c._moveEvent),e(document).unbind(c._upEvent),c.hasTouch&&c._slidesWrapper.unbind(c._cancelEvent),c._setGrabCursor(),!c.moved&&!c._multipleTouches)return c._albumInfoOpen?void c._hideAlbumInfo():c.hasTouch?void(c._controlsVisible?c._hideAllControls():c._showAllControls()):void(e(t.target).hasClass("play-button-icon")||c.next());s=Math.max(30,t.timeStamp||(new Date).getTime())-c._startTime;var _=0;if(c._isVerticalNav)var b="y",f=m.pageY,p=c.startY,h=c._accelerationY,g=c.currAlbumId,I=c.numAlbums,v=c.verDirection,A=c.sliderHeight,k=c._currentMainAlbumBlockId,B=c._loopAlbums,x=!0;else var b="x",f=m.pageX,p=c.startX,h=c._accelerationX,g=c.currItemId,I=c.currAlbumNumItems,v=c.horDirection,A=c.sliderWidth,k=c._currentMainBlockId,B=c._loopItems,x=!1;if(a=f-p,o=Math.abs(a),n=f-h,l=Math.abs(n)/s,0===v||1>=I)return r(b,!0,l),!1;if(!B)if(0>=g){if(v>0)return r(b,!0,l),!1}else if(g>=I-1&&0>v)return r(b,!0,l),!1;if(f>p+_){if(0>v)return r(b,!1,l),!1;c._moveTo("prev",b,i(Math.abs(c[b]-(k+1)*A)/l),x)}else if(p-_>f){if(v>0)return r(b,!1,l),!1;c._moveTo("next",b,i(Math.abs(c[b]-(k-1)*A)/l),x)}else r(b,!1,l);return!1},_addItemToLoadQueue:function(e,t,i,r){var a,o=this,n=o._getAlbum(i);if("start-item"===r&&(r=n.data("start-item")),a=o._getItem(i,r)){t.hasClass("last-block")&&t.removeClass("last-block");var s=a.data("img-scale");s||(s=n.data("img-scale"),a.data("img-scale",s)),e.push({block:t,item:a,bgColor:n.data("bg"),albumId:i})}else t.addClass("last-block")},_animateTo:function(e,t,i,r,a,o){function n(){var e,a=[];t&&("x"===i?(l._addItemToLoadQueue(a,l._centerBlock,l.currAlbumId,l.currItemId),l._currentMainBlockId=l._tempMainBlockId,"next"===t?(l._rightBlock.css("left",100*-l._currentMainBlockId+100+"%"),l._addItemToLoadQueue(a,l._rightBlock,l.currAlbumId,l.currItemId+1)):"prev"===t&&(l._leftBlock.css("left",100*-l._currentMainBlockId-100+"%"),l._addItemToLoadQueue(a,l._leftBlock,l.currAlbumId,l.currItemId-1)),l._topBlock.css("left",100*-l._currentMainBlockId+"%"),l._bottomBlock.css("left",100*-l._currentMainBlockId+"%"),e=l._getAlbum(l.currAlbumId),e.data("start-item",l.currItemId),l._addItemToLoadQueue(a,l._bottomBlock,l.currAlbumId+1,"start-item"),l._addItemToLoadQueue(a,l._topBlock,l.currAlbumId-1,"start-item")):(e=l._getAlbum(l.currAlbumId),l.currItemId=e.data("start-item"),l._addItemToLoadQueue(a,l._centerBlock,l.currAlbumId,l.currItemId),l._addItemToLoadQueue(a,l._rightBlock,l.currAlbumId,l.currItemId+1),l._currentMainAlbumBlockId=l._tempMainAlbumBlockId,"next"===t?(l._bottomBlock.css("top",100*-l._currentMainAlbumBlockId+100+"%"),l._addItemToLoadQueue(a,l._bottomBlock,l.currAlbumId+1,"start-item"),r&&l._addItemToLoadQueue(a,l._topBlock,l.currAlbumId-1,"start-item")):(l._topBlock.css("top",100*-l._currentMainAlbumBlockId-100+"%"),l._addItemToLoadQueue(a,l._topBlock,l.currAlbumId-1,"start-item"),r&&l._addItemToLoadQueue(a,l._bottomBlock,l.currAlbumId+1,"start-item")),l._leftBlock.css("top",100*-l._currentMainAlbumBlockId+"%"),l._rightBlock.css("top",100*-l._currentMainAlbumBlockId+"%"),l._addItemToLoadQueue(a,l._leftBlock,l.currAlbumId,l.currItemId-1)),l._updateImageQueue(a)),l._changeHash&&l._updateAlbumHash(),setTimeout(function(){l._isAnimating=!1,l.onTransitionComplete.call(l),l._changeHash&&l._setGrabCursor(),l.settings.autoOpenDescription&&l.sliderWidth>900?l._collapsedSlider||(0!==l.currItemId||l.albumsArr[l.currAlbumId].data("sawInfo")?l._fadeIn(l._albumIndicator):(l._showAlbumInfo(),l.albumsArr[l.currAlbumId].data("sawInfo",!0))):l._fadeIn(l._albumIndicator)},30)}var s,l=this;l.onTransitionStart.call(l),l._isAnimating=!0,l[i]=e,s="x"===i?l._xProp:l._yProp;var d={};isNaN(l._currAnimSpeed)&&(l._currAnimSpeed=400),l._useCSS3Transitions?(d[l.browserSufix+"transition-duration"]=l._currAnimSpeed+"ms",d[l.browserSufix+"transition-property"]=l.browserSufix+"transform",d[l.browserSufix+"transition-timing-function"]=void 0!=a?l.settings.css3easeInOutEasing:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",l._dragContainer.css(d),l._dragContainer.css(s,l._tPref1+l.x+l._tPref2+l.y+l._tPref3)):(d[s]=e,l._dragContainer.animate(d,l._currAnimSpeed,a?l.settings.easeInOutEasing:"easeOutSine")),l.loadingTimeout=o?setTimeout(function(){o.call()},l._currAnimSpeed+50):setTimeout(function(){n()},l._currAnimSpeed+50)},_setPosition:function(e,t){var i=this;i._useCSS3Transitions?"y"===t?(i.y=e,i._dragContainer.css(i._yProp,i._tPref1+i.x+i._tPref2+i.y+i._tPref3)):(i.x=e,i._dragContainer.css(i._xProp,i._tPref1+i.x+i._tPref2+i.y+i._tPref3)):"y"===t?(i.y=e,i._dragContainer.css(i._yProp,i.y)):(i.x=e,i._dragContainer.css(i._xProp,i.x))},updateSliderSize:function(){var e=this,t=window.innerWidth||document.body.clientWidth,i=(window.innerHeight||document.body.clientHeight,e._slidesWrapper.width()),r=e._slidesWrapper.height();if(i!=e.sliderWidth||r!=e.sliderHeight){e.sliderWidth=i,e.sliderHeight=r,e._xDistToSnap=1,e._yDistToSnap=1,e.sliderWidth<600?(e._collapsedSlider=!0,e.sliderRoot.addClass("smaller-collapsed-slider")):(e._collapsedSlider=!1,e.sliderRoot.removeClass("smaller-collapsed-slider")),t>=850?(e._imagePaddingEMs="2",e._controlsVisible||e._showAllControls()):850>t&&(e._imagePaddingEMs=t>700?"1":"0"),e._useCSS3Transitions&&e._dragContainer.css(e.browserSufix+"transition-duration","0s");for(var a,o=[e._centerBlock,e._leftBlock,e._rightBlock,e._bottomBlock,e._topBlock],n=0;n<o.length;n++)a=o[n].find("img"),a&&e._resizeImage(a,a.data("img-width"),a.data("img-height"));if(e._setPosition(e._currentMainBlockId*e.sliderWidth,"x"),e._setPosition(e._currentMainAlbumBlockId*e.sliderHeight,"y"),e.isVideoPlaying){var s=e.videoContainer.find(".video-player"),l=e._resizeImage("",e.settings.maxVideoWidth,e.settings.maxVideoHeight,!0);s.css({"margin-left":l.left,"margin-top":l.top,width:l.width,height:l.height}),s.removeAttr("width")}}},updateContents:function(){var e=this,t=(e.currAlbumItems.eq(e.currItemId),[]);e._addItemToLoadQueue(t,e._centerBlock,e.currAlbumId,e.currItemId),e._addItemToLoadQueue(t,e._rightBlock,e.currAlbumId,e.currItemId+1),e._addItemToLoadQueue(t,e._leftBlock,e.currAlbumId,e.currItemId-1),e._addItemToLoadQueue(t,e._bottomBlock,e.currAlbumId+1,0),e._addItemToLoadQueue(t,e._topBlock,e.currAlbumId-1,0),e._updateImageQueue(t);var i=e._getAlbum(e.currAlbumId);i.data("start-item",e.currItemId),e._updateControls()},_getItem:function(e,t){var i,r=this;if(0>e){if(!r._loopAlbums)return!1;e=r.numAlbums-1}else if(e>=this.numAlbums){if(!r._loopAlbums)return!1;e=0}var a=this.albumsArr[e];if(a){var o=a.find(".two-dim-item");if(o){var n=o.length;if(0>=n)return 0;if(0>t){if(!r._loopItems)return!1;t=n-1}else if(t>=n){if(!r._loopItems)return!1;t=0}i=o.eq(t)}i.find("img").data("img-scale",a.data("img-scale"))}return i},_updateCurrItemId:function(e,t){var i=this;i._lastAlbumId=i.currAlbumId,i._lastAlbumNumItems=i.currAlbumNumItems,i._lastItemId=i.currItemId,0>e?e=i.numAlbums-1:e>=i.numAlbums&&(e=0),i.currAlbumId=e;var r=i.albumsArr[e];if(r){var a=r.find(".two-dim-item");if(a){var o=a.length;if(0>=o)return 0;i.currAlbumNumItems=o,0>t?t=o-1:t>=o&&(t=0)}i.currItemId=t}else alert("Album is empty:"+e+" id:"+t)},_updateControls:function(e){function t(){i._itemCountIndicator.text(""+(i.currItemId+1)+" of "+i.currAlbumNumItems)}var i=this;if("y"===e)i.numAlbums>1&&i.currAlbumId>=0&&(i.settings.appendGalleriesToMenu&&(i._galleryMenuItems.removeClass("current-album-menu-item"),i._galleryMenuItems.eq(i.currAlbumId).addClass("current-album-menu-item")),i._collapsedSlider||i._fadeOut(i._albumIndicator),setTimeout(function(){i._itemCountIndicator.text(""+(i.currItemId+1)+" of "+i.currAlbumNumItems),i._albumNameIndicator.text(i.albumsArr[i.currAlbumId].find(".album-title").text())},400),i._updateAlbumIndicator(),i._updateItemControls());else if("x"===e)t(),i._updateItemControls();else{if(i._galleryMenuItems){var r=i._galleryMenuItems.eq(i.currAlbumId);r.addClass("current-album-menu-item")}i._updateAlbumIndicator(),i._albumNameIndicator.text(i.albumsArr[i.currAlbumId].find(".album-title").text()),t(),i._updateItemControls()}},_updateItemControls:function(){var e=this;e._arrowControlsEnabled&&(e._prevImageArr.hasClass("disabled-arrow")&&e._prevImageArr.removeClass("disabled-arrow"),e._nextImageArr.hasClass("disabled-arrow")&&e._nextImageArr.removeClass("disabled-arrow"),e.currItemId<=0?e.currAlbumId>0?e._prevImageArr.hasClass("prev-album-arrow")||e._prevImageArr.addClass("prev-album-arrow").find(".info-text").addClass("info-text-visible"):e._lastItemLink&&e._galleryPostsNavigation.find("a[rel=next]").attr("href")?e._prevImageArr.addClass("prev-album-arrow").find(".info-text").addClass("info-text-visible"):e._prevImageArr.addClass("disabled-arrow").find(".info-text").removeClass("info-text-visible"):e._prevImageArr.hasClass("prev-album-arrow")&&e._prevImageArr.removeClass("prev-album-arrow").find(".info-text").removeClass("info-text-visible"),e.currItemId>=e.currAlbumNumItems-1?e.currAlbumId<e.numAlbums-1?e._nextImageArr.hasClass("next-album-arrow")||e._nextImageArr.addClass("next-album-arrow").find(".info-text").addClass("info-text-visible"):e._lastItemLink&&e._galleryPostsNavigation.find("a[rel=prev]").attr("href")?e._nextImageArr.addClass("next-album-arrow").find(".info-text").addClass("info-text-visible"):e._nextImageArr.addClass("disabled-arrow").find(".info-text").removeClass("info-text-visible"):e._nextImageArr.hasClass("next-album-arrow")&&e._nextImageArr.removeClass("next-album-arrow").find(".info-text").removeClass("info-text-visible"))},_updateAlbumIndicator:function(){},_getAlbum:function(e){return 0>e?e=this.numAlbums-1:e>=this.numAlbums&&(e=0),this.albumsArr[e]},_updateImageQueue:function(e){var t=this;if(e){for(var i,r,a,o,n,s,l=0;l<e.length;l++)i=e[l],o=i.block,s=i.item.data(),i.item?(r=o.find("img"),n=Boolean(void 0!==s.videoUrl),n||o.find(".play-button-container").remove(),a=i.item.find("a").attr("href"),r.attr("src")!==a?r.css("visibility","hidden"):i.block.hasClass("loading")||r.css("visibility","visible"),t._updateAlbumBackground(o,i.bgColor,i.albumId)):(e.splice(l,1),l--);t.isLoading=!0}t.loadQueue=e,t._loadNextImage()},_onLoadingComplete:function(e){var t=this;return function(){var i=e.img,r=e.loadDataItem.item.data(),a=e.block.find(".block-inside"),o=Boolean(void 0!==r.videoUrl);i.data("blocked-by-loop")||i.css({visibility:"visible"}),o?!a.find(".play-button-container").length>0&&(a.append('<a class="play-button-container"><span class="play-button"><i class="play-icons-wrap"><u class="play-button-icon"></u><u class="play-video-loading-icon"></u></i></snan></a>'),a.find(".play-button-container").bind("click",function(i){return t.moved?!1:(i.preventDefault(),i.stopImmediatePropagation(),t._controlsVisible=!0,t._showVideo(e,a),void 0)})):a.find(".play-button-container").length>0&&(a.find("img").css("cursor","inherit").unbind("click"),a.find(".play-button-container").unbind("click"),a.find(".play-button-container").remove()),e.block.removeClass("loading"),e.block.find(".preloader-container").remove(),i.unbind("error.tds"),i.unbind("load.tds"),!t.firstLoaded&&t.settings.firstImageLoadedCallback&&(t.settings.firstImageLoadedCallback.call(t),t.firstLoaded=!0),t.loadQueue.length>1?(t.loadQueue.shift(),t._loadNextImage()):t.isLoading=!1}},_loadNextImage:function(){var t=this,i=t.loadQueue[0];if(i){var r=i.item;if(r){var a=i.block,o=a.find("img").eq(0),n=a.find("#img-desc").eq(0),s=r.find("a").attr("href"),l=r.attr("data-img-width"),d=r.attr("data-img-height"),u=r.attr("data-img-title"),c=r.attr("data-img-desc");if(o.length<=0?(hasImage=!1,o=e("<img />"),currBlockPath=""):(hasImage=!0,currBlockPath=o.attr("src")),n.length<=0?(hasDesc=!1,n=e('<div id="img-desc" class="img-desc-block text-block"><div class="info-container"><h3 class="img-title"></h3><div class="img-content"></div></div></div>')):hasDesc=!0,o.data({"img-width":l,"img-height":d,"img-scale":r.data("img-scale")}),currBlockPath===s)return void(a.hasClass("loading")||(t.loadQueue.length>1?(t.loadQueue.shift(),t._loadNextImage()):t.isLoading=!1));t.imageLoader&&t.imageLoader.attr("src")==s?(t._resizeImage(o,l,d),t._onLoadingComplete({type:"loaded",item:r,block:a})):(a.addClass("loading"),a.append('<div class="preloader-container"><div class="preloader-spinner"></div></div>'),o.css("visibility","hidden").bind("load.tds",t._onLoadingComplete({type:"loaded",loadDataItem:i,block:a,img:o})).bind("error.tds",t._onLoadingComplete({type:"error",loadDataItem:i,block:a,img:o})).attr({src:s,alt:r.find("a").text()}),c.length>0||u.length>0?(n.find(".img-title").text(u),n.find(".img-content").text(c),n.show()):n.hide(),hasDesc||n.appendTo(a.find(".block-inside")),hasImage||o.appendTo(a.find(".block-inside")),t._resizeImage(o,l,d))}}},_resizeImage:function(e,t,i,r){var a=this;if(imgScaleMode=r?"fit-if-smaller":e.data("img-scale"),r||(t=parseInt(t,10),i=parseInt(i,10)),r)a.imgWrapWidth=a.videoContainer.width(),a.imgWrapHeight=a.videoContainer.height();else{var o;o="fill"!==imgScaleMode?a._imagePaddingEMs+"em":"0";var n=e.parent(".block-inside").css("margin",o);a.imgWrapWidth=n.width(),a.imgWrapHeight=n.height()}var s,l,d,u,c,m=a.imgWrapWidth,_=a.imgWrapHeight,b=!0;if("fit-if-smaller"===imgScaleMode&&(t>m||i>_)&&(imgScaleMode="fit"),"fill"===imgScaleMode||"fit"===imgScaleMode?(s=m/t,l=_/i,d="fill"==imgScaleMode?s>l?s:l:"fit"==imgScaleMode?l>s?s:l:1,u=parseInt(t*d,10),c=parseInt(i*d,10)):(u=t,c=i),b){if(!e)return{width:u,height:c,left:Math.floor((m-u)/2),top:Math.floor((_-c)/2)};e.css({"margin-left":Math.floor((m-u)/2),"margin-top":Math.floor((_-c)/2),width:u,height:c})}else{if(!e)return{width:u,height:c,left:0,top:0};e.css({width:u,height:c})}},_setGrabCursor:function(){this.hasTouch||(this._grabCursor?this._slidesWrapper.css("cursor",this._grabCursor):(this._slidesWrapper.removeClass("grabbing-cursor"),this._slidesWrapper.addClass("grab-cursor")))},_setGrabbingCursor:function(){this.hasTouch||(this._grabbingCursor?this._slidesWrapper.css("cursor",this._grabbingCursor):(this._slidesWrapper.removeClass("grab-cursor"),this._slidesWrapper.addClass("grabbing-cursor")))},_showVideo:function(t,i){var r=this;if(r.isVideoPlaying)return!1;var a=t.loadDataItem.item.data();if(void 0!==a.videoUrl){var o,n=a.videoUrl;if(n.match(/youtu\.be/i)||n.match(/youtube\.com\/watch/i))if(o=r._getYoutubeVideoId(n)){r.isVideoPlaying=!0,n="http://www.youtube.com/embed/"+o+"?rel=1",r.settings.autoplayVideo&&(n+="&autoplay=1&showinfo=0"),i.find(".play-button").addClass("play-button-loading"),r._fadeInVideo(t.loadDataItem.block);var s=e('<iframe class="video-player" src ="'+n+'" frameborder="no"></iframe>');r.videoOverlay.css("display","block");var l=r._resizeImage("",r.settings.maxVideoWidth,r.settings.maxVideoHeight,!0);s.css({"margin-left":l.left,"margin-top":l.top,width:l.width,height:l.height}),r._videoCloseButton.removeClass("hidden-video"),r.videoContainer.append(s)}else alert("Incorrect YouTube URL syntax");else if(n.match(/vimeo\.com/i)){o=r._getVimeoVideoId(n),r.isVideoPlaying=!0,n="http://player.vimeo.com/video/"+o+"?title=0&amp;byline=0&amp;portrait=0",r.settings.autoplayVideo&&(n+="&autoplay=1"),i.find(".play-button").addClass("play-button-loading"),r._fadeInVideo(t.loadDataItem.block);var s=e('<iframe class="video-player" src ="'+n+'" frameborder="no"></iframe>');r.videoOverlay.css("display","block");var l=r._resizeImage("",r.settings.maxVideoWidth,r.settings.maxVideoHeight,!0);s.css({"margin-left":l.left,"margin-top":l.top,width:l.width,height:l.height}),r._videoCloseButton.removeClass("hidden-video"),r.videoContainer.append(s)}else alert("Incorrect video URL: "+n)}},stopAndCloseVideo:function(){var e=this;e._videoCloseButton.addClass("hidden-video"),e.videoOverlay.css("display","none"),e.videoContainer.find("iframe").remove();var t=e._centerBlock.find("img");t.length>0&&t.animate({opacity:1},400,"easeOutSine"),e._centerBlock.find(".play-button-loading").removeClass("play-button-loading"),e.isVideoPlaying=!1,e._showAllControls()},_fadeInVideo:function(e){var t=this;t._albumInfoOpen&&t._toggleAlbumInfo();var i=e.find("img");i.length>0&&i.animate({opacity:0},400,"easeOutSine"),t._hideAllControls()},_showAllControls:function(){var e=this;e._controlsVisible||(e._fadeIn(e._headerSideMenu),e._controlsVisible=!0,e._fadeIn(e._sliderControls))},_hideAllControls:function(){var e=this;e._controlsVisible&&(e._albumInfoOpen&&e._toggleAlbumInfo(),e._headerSideMenu.hasClass("collapsed-gallery-page-menu")&&e._fadeOut(e._headerSideMenu),e._fadeOut(e._sliderControls),e._controlsVisible=!1)},_fadeOut:function(e,t){setTimeout(function(){e.stop().animate({opacity:0},300,function(){e.css("display","none"),t&&t.call()})},0)},_fadeIn:function(e,t){e.stop().css("display","block"),setTimeout(function(){e.animate({opacity:1},300,function(){t&&t.call()})},0)},_getVimeoVideoId:function(e){var t=/\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,i=e.match(t);return i?i[2]:!1},_getYoutubeVideoId:function(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,i=e.match(t);return i&&11==i[7].length?i[7]:!1},_showAlbumInfo:function(){var t=this;if(!t._albumInfoOpen){if(t._albumInfoBlock.data("curr-album-id")!==t.currAlbumId){var i=t.albumsArr[t.currAlbumId].find(".album-meta"),r='<div class="info-container">'+i.html(),a=i.find(".album-title a"),o=a.attr("href");a=a.html();var n=t._getItem(t.currAlbumId,0).find("a").attr("href");r+='<div class="bottom-bar clearfix">',t.settings.showShareButtons&&(r+='<div class="share-project">',r+='<a href="http://pinterest.com/pin/create/button/?url='+o+"&media="+n+"&description="+a+'" class="pin-it-btn"></a>',r+='<a class="facebook-share-btn" href="http://www.facebook.com/sharer/sharer.php?u='+o+'">',r+="</a>"),r+='<a href="javascript:void(0);" class="close-project">'+t._wpVars.closeProjectInfo+"</a>",r+="</div>",r+="</div>",t._albumInfoBlock.html(r);var s=t._albumInfoBlock.find(".album-title a");s.replaceWith(s.text());var l=t._albumInfoBlock.find(".close-project");l.bind("click",function(e){e.preventDefault(),t._hideAlbumInfo()}),t._albumInfoBlock.find(".pin-it-btn, .facebook-share-btn").click(function(t){t.preventDefault();window.open(e(this).attr("href"),"signin","width=665,height=300")}),"undefined"!=typeof FB&&null!=FB&&FB.XFBML.parse(t._albumInfoBlock.get(0)),t._albumInfoBlock.data("curr-album-id",t.currAlbumId)}t._fadeIn(t._albumInfoBlock),t._fadeOut(t._albumIndicator),t._albumInfoOpen=!0}},_hideAlbumInfo:function(){var e=this;e._albumInfoOpen&&(e._albumInfoAnimating=!0,e._fadeOut(e._albumInfoBlock,function(){e._albumInfoAnimating=!1}),e._fadeIn(e._albumIndicator),e._albumInfoOpen=!1)},_toggleAlbumInfo:function(){var e=this;e._albumInfoOpen?e._hideAlbumInfo():e._showAlbumInfo()},_updateMenuSize:function(){var e=this,t=window.innerWidth||document.body.clientWidth;e._isMenuVisible&&(e._isMenuCollapsed=!0,t>600?e._headerSideMenu.css("width","50%"):e._headerSideMenu.css("width","100%"))},_getQueryParameters:function(){var e=window.location.href.split("?")[1];if(!e)return{};for(var t=e.split("&"),i={},r=0,a=t.length;a>r;r++){var o=t[r].split("=");i[o[0]]=o[1]}return i}},e.fn.twoDimSlider=function(i){return this.each(function(){var r=new t(e(this),i);e(this).data("twoDimSlider",r)})},e.fn.twoDimSlider.defaults={keyboardNavEnabled:!0,transitionSpeed:600,autoplayVideo:!0,maxVideoWidth:800,maxVideoHeight:600,openInfoBlockAtStart:!1,disableContextMenu:!1,easeInOutEasing:"easeInOutSine",css3easeInOutEasing:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",firstImageLoadedCallback:!1,appendGalleriesToMenu:!1,autoOpenDescription:Boolean(tdSliderVars.autoOpenProjectDesc),showShareButtons:Boolean(tdSliderVars.showShareButtons)},e.fn.twoDimSlider.settings={}}(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 *
 * Requires: 1.2.2+
 */
(function($){var c=['DOMMouseScroll','mousewheel'];if($.event.fixHooks){for(var i=c.length;i;){$.event.fixHooks[c[--i]]=$.event.mouseHooks}}$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=c.length;i;){this.addEventListener(c[--i],handler,false)}}else{this.onmousewheel=handler}},teardown:function(){if(this.removeEventListener){for(var i=c.length;i;){this.removeEventListener(c[--i],handler,false)}}else{this.onmousewheel=null}}};$.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});function handler(a){var b=a||window.event,args=[].slice.call(arguments,1),delta=0,returnValue=true,deltaX=0,deltaY=0;a=$.event.fix(b);a.type="mousewheel";if(b.wheelDelta){delta=b.wheelDelta/120}if(b.detail){delta=-b.detail/3}deltaY=delta;if(b.axis!==undefined&&b.axis===b.HORIZONTAL_AXIS){deltaY=0;deltaX=-1*delta}if(b.wheelDeltaY!==undefined){deltaY=b.wheelDeltaY/120}if(b.wheelDeltaX!==undefined){deltaX=-1*b.wheelDeltaX/120}args.unshift(a,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args)}})(jQuery);



/* Modernizr 2.5.2 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-csstransforms3d-teststyles-testprop-testallprops-prefixes-domprefixes
 */
;window.Modernizr=function(a,b,c){function y(a){i.cssText=a}function z(a,b){return y(l.join(a+";")+(b||""))}function A(a,b){return typeof a===b}function B(a,b){return!!~(""+a).indexOf(b)}function C(a,b){for(var d in a)if(i[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function D(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:A(f,"function")?f.bind(d||b):f}return!1}function E(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+n.join(d+" ")+d).split(" ");return A(b,"string")||A(b,"undefined")?C(e,b):(e=(a+" "+o.join(d+" ")+d).split(" "),D(e,b,c))}var d="2.5.2",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,j,k={}.toString,l=" -webkit- -moz- -o- -ms- ".split(" "),m="Webkit Moz O ms",n=m.split(" "),o=m.toLowerCase().split(" "),p={},q={},r={},s=[],t=s.slice,u,v=function(a,c,d,e){var h,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:g+(d+1),k.appendChild(j);return h=["&#173;","<style>",a,"</style>"].join(""),k.id=g,m.innerHTML+=h,m.appendChild(k),l||f.appendChild(m),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},w={}.hasOwnProperty,x;!A(w,"undefined")&&!A(w.call,"undefined")?x=function(a,b){return w.call(a,b)}:x=function(a,b){return b in a&&A(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=t.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(t.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(t.call(arguments)))};return e});var F=function(a,c){var d=a.join(""),f=c.length;v(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d?d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"":"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.csstransforms3d=(i.csstransforms3d&&i.csstransforms3d.offsetLeft)===9&&i.csstransforms3d.offsetHeight===3},f,c)}([,["@media (",l.join("transform-3d),("),g,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"csstransforms3d"]);p.csstransforms3d=function(){var a=!!E("perspective");return a&&"webkitPerspective"in f.style&&(a=e.csstransforms3d),a};for(var G in p)x(p,G)&&(u=G.toLowerCase(),e[u]=p[G](),s.push((e[u]?"":"no-")+u));return y(""),h=j=null,e._version=d,e._prefixes=l,e._domPrefixes=o,e._cssomPrefixes=n,e.testProp=function(a){return C([a])},e.testAllProps=E,e.testStyles=v,e}(this,this.document);


/*!
 * jQuery idleTimer plugin
 * version 0.9.100511
 * by Paul Irish.
 *   http://github.com/paulirish/yui-misc/tree/
 * MIT license
 * Copyright (c) 2009 Nicholas C. Zakas
 * adapted from YUI idle timer by nzakas:
 *   http://github.com/nzakas/yui-misc/
*/
(function(e){e.idleTimer=function(t,n,r){r=e.extend({startImmediately:true,idle:false,enabled:true,timeout:3e4,events:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove"},r);n=n||document;var i=function(t){if(typeof t==="number"){t=undefined}var s=e.data(t||n,"idleTimerObj");s.idle=!s.idle;var o=+(new Date)-s.olddate;s.olddate=+(new Date);if(s.idle&&o<r.timeout){s.idle=false;clearTimeout(e.idleTimer.tId);if(r.enabled)e.idleTimer.tId=setTimeout(i,r.timeout);return}var u=jQuery.Event(e.data(n,"idleTimer",s.idle?"idle":"active")+".idleTimer");e(n).trigger(u)},s=function(t){var n=e.data(t,"idleTimerObj")||{};n.enabled=false;clearTimeout(n.tId);e(t).off(".idleTimer")},o=function(t){var n=e.data(this,"idleTimerObj");clearTimeout(n.tId);if(n.enabled){if(n.idle){i(this)}n.tId=setTimeout(i,n.timeout)}};var u=e.data(n,"idleTimerObj")||{};u.olddate=u.olddate||+(new Date);if(typeof t==="number"){r.timeout=t}else if(t==="destroy"){s(n);return this}else if(t==="getElapsedTime"){return+(new Date)-u.olddate}e(n).on(e.trim((r.events+" ").split(" ").join(".idleTimer ")),o);u.idle=r.idle;u.enabled=r.enabled;u.timeout=r.timeout;if(r.startImmediately){u.tId=setTimeout(i,u.timeout)}e.data(n,"idleTimer","active");e.data(n,"idleTimerObj",u)};e.fn.idleTimer=function(t,n){if(!n){n={}}if(this[0]){e.idleTimer(t,this[0],n)}return this}})(jQuery);